import ReactPlayer from 'react-player';

# useAccessibleAnimation

`useAccessibleAnimation` is a hook that helps create accessible animations by honouring the user [Reduce Motion](https://reactnative.dev/docs/accessibilityinfo) preference.

:::note

1. This hook uses the react-native built-in [Animated API](https://reactnative.dev/docs/animations).
2. This hook uses a custom module to detect if the animations on Android are disabled or not.
   :::

## Usage

```ts
import { useAccessibleAnimation } from 'react-native-ama';

const { animatedStyle, progress, play } = useAccessibleAnimation({
  duration,
  useNativeDriver,
  from: {},
  to: {},
  skipIfReduceMotionEnabled,
});
```

| Property                  | Type      | Description                                                                                        |
| ------------------------- | --------- | -------------------------------------------------------------------------------------------------- |
| duration                  | number    | the animation duration                                                                             |
| useNativeDriver           | boolean   | [Using the native driver](https://reactnative.dev/docs/animations#using-the-native-driver)         |
| from                      | ViewStyle | the initial state of the animation                                                                 |
| to                        | ViewStyle | the final state of the animation                                                                   |
| skipIfReduceMotionEnabled | boolean   | _(Optional)_ if true, the animation will be played with duration 0 when `Reduce Motion` is enabled. |

### Returns

| Property      | Type                             | Description                                      |
| ------------- | -------------------------------- | ------------------------------------------------ |
| animatedStyle | Object                           | the animation style to apply at the component    |
| progress      | Animated.Value                   | The Animated.Value used to trigger the animation |
| play          | (toValue = 1) => Animated.timing | Returns the Animated.timing                      |

## Example

The following animations translate in, with fading, an absolute positioned view:

```ts
import React, { useRef } from 'react';
import { Animated, Dimensions, StyleSheet, View } from 'react-native';
import { Pressable, Text } from 'react-native-ama';
import { useAccessibleAnimation } from 'react-native-ama';

export const ReduceMotionScreen = () => {
  const [overlayProgressValue, setOverlayProgressValue] =
    React.useState<Animated.Value | null>(null);
  const animationProgress = useRef<Animated.Value>(
    new Animated.Value(0),
  ).current;
  const { play, animatedStyle, progress } = useAccessibleAnimation({
    duration: 300,
    useNativeDriver: true,
    from: {
      opacity: 0,
      transform: [{ translateY: 200 }],
    },
    to: {
      opacity: 1,
      transform: [{ translateY: 0 }],
    },
  });

  const overlayStyle = {
    opacity: overlayProgressValue || 0,
  };

  const playAnimation = () => {
    setOverlayProgressValue(progress);
    play().start();
  };

  return (
    <>
      <View style={styles.container}>
        <Pressable title="Test Animation 1" onPress={playAnimation1} />
      </View>
      {overlayProgressValue ? (
        <Pressable
          accessibilityRole="button"
          accessibilityLabel="Close popup"
          style={StyleSheet.absoluteFill}
          onPress={() => reverseAnimation()}>
          <Animated.View style={[styles.overlay, overlayStyle]} />
        </Pressable>
      ) : null}
      <Animated.View style={[styles.animation1, animatedStyle]}>
        <Text style={styles.text}>Content goes here</Text>
      </Animated.View>
    </>
  );
};
```
This is the result when we play the animation with Reduce Motion off and on:

| Reduce Motion: **off**                                                                                             | Reduce Motion: **on** |
| ------------------------------------------------------------------------------------------------------------------ | --------------------- |
| <ReactPlayer url="/open-source/react-native-ama/videos/reduce-motion-off.mov" playing={false} loop={false} width={300} height={700} /> | <ReactPlayer url="/open-source/react-native-ama/videos/reduce-motion-on.mov" playing={false} loop={false} width={300} height={700} /> | <ReactPlayer url="/open-source/react-native-ama/videos/reduce-motion-on.mov" playing={false} loop={false} width={300} height={700} /> 

When reduce Motion is off, the animation is played as specified; while when is **on** any [motion](/docs/utils/isMotionAnimation) animation is played instantaneity (using a duration of 0), while other properties, like opacity, are played as specified.

## Sequential animation

Let's consider the following animation:


### skipIfReduceMotionEnabled